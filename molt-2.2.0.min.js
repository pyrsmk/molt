(function(a){typeof module!="undefined"?module.exports=a:this.molt=a})(function(){var a="getAttribute",b=[],c=[],d=[],e,f=function(){var a,f,g,h,j,k,l,m,n=W(),o;e=-1;while(k=d[++e]){l=(h=k.getAttribute("url")).match(/\{\s*(.*?)\s*\}/)[1].split(/\s*,\s*/);for(g=0;g<l.length;g++)m=l[g].split(":"),m.length===1?l[g]=[m[0],m[0]]:l[g]=[m[0],m[1]];a=l.length;while(a)if(n>l[--a][0].match(/^!?(.+)/)[1])break;if(l[a][0].charAt(0)=="!")k.style.display="none";else{k.style.display=="none"&&((j=k.getAttribute("display"))?k.style.display=j:k.style.display="inline"),k.src=h.replace(/\{.+\}/g,l[a][1]),f=b.length;while(f)b[--f]==k&&c[f].apply(k,[l[a][1]])}}};return{listen:function(a,d){b.push(a),c.push(d)},discover:function(){var b=document.getElementsByTagName("img"),c=b.length;while(c)b[--c][a]("url")&&d.push(b[c]);f(),W(f)}}}());